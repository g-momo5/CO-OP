<!DOCTYPE html>
<html lang="ar" dir="rtl" style="direction: rtl; text-align: right;">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Language" content="ar">
  <meta name="format-detection" content="telephone=no">
  <title>ูุญุทุฉ ุจูุฒูู ุณูููุฏ - ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ ููุจุชุฑูู</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="rtl-config.js"></script>
</head>

<body>
  <!-- Toast Notifications Container -->
  <div id="toast-container" class="toast-container"></div>

  <div class="app-container">
    <!-- Header with Breadcrumb -->
    <header class="header">
      <h1 class="app-title">ูุญุทุฉ ุจูุฒูู ุณูููุฏ - ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ ููุจุชุฑูู</h1>

      <!-- Breadcrumb Navigation -->
      <nav class="breadcrumb-nav" id="breadcrumb-nav" style="display: none;">
        <button class="breadcrumb-back-btn" id="breadcrumb-back-btn" onclick="navigateBack()">
          <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
          </svg>
          ุฑุฌูุน
        </button>
        <div class="breadcrumb-trail" id="breadcrumb-trail"></div>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Home Screen -->
      <div id="home-screen" class="screen active">
        <div class="home-chart-container">
          <h2>ูููุงุช ุงููุดุชุฑูุงุช ุงูุดูุฑูุฉ ุญุณุจ ููุน ุงููููุฏ</h2>
          <div class="chart-wrapper">
            <canvas id="monthly-fuel-sales-chart"></canvas>
          </div>
        </div>

        <div class="depot-management">
          <div class="depot-card" onclick="showDepotScreen()">
            <h3>ุฅุฏุงุฑุฉ ุงููุฎุฒู</h3>
            <p>ุชุชุจุน ูุฎุฒูู ุงููููุฏ ูุงูุฒููุช</p>
          </div>
        </div>
      </div>

      <!-- Invoice Screen -->
      <div id="invoice-screen" class="screen">
        <h2>ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</h2>
        
        <!-- Invoice Type Selection -->
        <div class="invoice-type-selector">
          <button class="type-btn active" data-type="fuel">ูุงุชูุฑุฉ ูููุฏ</button>
          <button class="type-btn" data-type="oil">ูุงุชูุฑุฉ ุฒููุช</button>
        </div>

        <!-- Fuel Invoice Form -->
        <div id="fuel-invoice-form" class="invoice-form active">
          <div class="form-row">
            <div class="form-group">
              <label for="fuel-invoice-date">ุงูุชุงุฑูุฎ:</label>
              <input type="date" id="fuel-invoice-date" required>
            </div>
            <div class="form-group">
              <label for="fuel-invoice-number">ุฑูู ุงููุงุชูุฑุฉ:</label>
              <input type="text" id="fuel-invoice-number" required>
            </div>
          </div>

          <div class="fuel-items-container">
            <h3>ุชูุงุตูู ุงููููุฏ</h3>
            <div class="fuel-items-header">
              <div class="fuel-header-item fuel-name-col">ุงููููุฏ</div>
              <div class="fuel-header-item">ุงููููุฉ</div>
              <div class="fuel-header-item">ุณุนุฑ ุงูุดุฑุงุก</div>
              <div class="fuel-header-item">ุงูุฅุฌูุงูู</div>
            </div>
            <div class="fuel-item" data-fuel="ุจูุฒูู ูจู">
              <div class="fuel-row">
                <div class="fuel-name">ุจูุฒูู ูจู</div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-quantity" placeholder="ุงููููุฉ">
                  <div class="net-quantity" data-fuel="ุจูุฒูู ูจู">ุงููููุฉ ุงูุตุงููุฉ: <span>0</span> ูุชุฑ</div>
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-purchase-price" placeholder="ุณุนุฑ ุงูุดุฑุงุก">
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-total" readonly placeholder="ุงูุฅุฌูุงูู">
                </div>
              </div>
            </div>

            <div class="fuel-item" data-fuel="ุจูุฒูู ูฉูข">
              <div class="fuel-row">
                <div class="fuel-name">ุจูุฒูู ูฉูข</div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-quantity" placeholder="ุงููููุฉ">
                  <div class="net-quantity" data-fuel="ุจูุฒูู ูฉูข">ุงููููุฉ ุงูุตุงููุฉ: <span>0</span> ูุชุฑ</div>
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-purchase-price" placeholder="ุณุนุฑ ุงูุดุฑุงุก">
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-total" readonly placeholder="ุงูุฅุฌูุงูู">
                </div>
              </div>
            </div>

            <div class="fuel-item" data-fuel="ุจูุฒูู ูฉูฅ">
              <div class="fuel-row">
                <div class="fuel-name">ุจูุฒูู ูฉูฅ</div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-quantity" placeholder="ุงููููุฉ">
                  <div class="net-quantity" data-fuel="ุจูุฒูู ูฉูฅ">ุงููููุฉ ุงูุตุงููุฉ: <span>0</span> ูุชุฑ</div>
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-purchase-price" placeholder="ุณุนุฑ ุงูุดุฑุงุก">
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-total" readonly placeholder="ุงูุฅุฌูุงูู">
                </div>
              </div>
            </div>

            <div class="fuel-item" data-fuel="ุณููุงุฑ">
              <div class="fuel-row">
                <div class="fuel-name">ุณููุงุฑ</div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-quantity" placeholder="ุงููููุฉ">
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-purchase-price" placeholder="ุณุนุฑ ุงูุดุฑุงุก">
                </div>
                <div class="fuel-input-group">
                  <input type="text" class="fuel-total" readonly placeholder="ุงูุฅุฌูุงูู">
                </div>
              </div>
            </div>
          </div>

          <div class="invoice-summary">
            <div class="summary-row">
              <span>ุชุฃููู ููุฏู:</span>
              <span id="cash-deposit">0.00 ุฌููู</span>
            </div>
            <div class="summary-row">
              <span>ุฅุฌูุงูู ุงููุงุชูุฑุฉ:</span>
              <input type="number" id="actual-invoice-total" placeholder="ุฃุฏุฎู ุงูุฅุฌูุงูู" step="0.01" style="width: 200px; padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px; text-align: center;">
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-primary" onclick="saveFuelInvoice()">ุญูุธ ูุงุชูุฑุฉ ุงููููุฏ</button>
            <button type="button" class="btn btn-secondary" onclick="resetFuelInvoiceForm()">ุฅุนุงุฏุฉ ุชุนููู</button>
          </div>
        </div>

        <!-- Oil Invoice Form -->
        <div id="oil-invoice-form" class="invoice-form">
          <div class="form-row">
            <div class="form-group">
              <label for="oil-invoice-date">ุงูุชุงุฑูุฎ:</label>
              <input type="date" id="oil-invoice-date" required>
            </div>
            <div class="form-group">
              <label for="oil-invoice-number">ุฑูู ุงููุงุชูุฑุฉ:</label>
              <input type="text" id="oil-invoice-number" placeholder="12345" required>
            </div>
          </div>

          <div class="oil-items-container">
            <h3>ุชูุงุตูู ุงูุฒููุช</h3>
            <div class="oil-items-header">
              <div class="oil-header-item oil-type-col">ููุน ุงูุฒูุช</div>
              <div class="oil-header-item">ุงููููุฉ</div>
              <div class="oil-header-item">ุณุนุฑ ุงูุดุฑุงุก ุงููุญุฏุฉ</div>
              <div class="oil-header-item">ุงูุถุฑูุจุฉ (ูช)</div>
              <div class="oil-header-item">ุฅุฌูุงูู ุงูุดุฑุงุก</div>
              <div class="oil-header-item oil-delete-col"></div>
            </div>
            <div class="oil-items-list" id="oil-items-list">
              <!-- Le righe degli oli verranno aggiunte dinamicamente qui -->
            </div>
            <div class="add-oil-item-container">
              <button type="button" class="btn btn-secondary" onclick="addOilItem()">ุฅุถุงูุฉ ุฒูุช</button>
            </div>
          </div>

          <div class="invoice-summary">
            <div class="summary-row discount-row">
              <label for="immediate-discount">ุฎุตู ููุฑู:</label>
              <input type="number" id="immediate-discount" min="0" step="0.01" value="0" placeholder="0.00">
              <span>ุฌููู</span>
            </div>
            <div class="summary-row tax-row">
              <label for="martyrs-tax">ุถุฑูุจุฉ ุชูุฑูู ุดูุฏุงุก:</label>
              <input type="number" id="martyrs-tax" min="0" step="0.01" value="0" placeholder="0.00">
              <span>ุฌููู</span>
            </div>
            <div class="summary-row final-total">
              <span>ุฅุฌูุงูู ุงููุงุชูุฑุฉ:</span>
              <span id="oil-invoice-total">0.00 ุฌููู</span>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-primary" onclick="saveOilInvoice()">ุญูุธ ูุงุชูุฑุฉ ุงูุฒููุช</button>
            <button type="button" class="btn btn-secondary" onclick="resetOilInvoiceForm()">ุฅุนุงุฏุฉ ุชุนููู</button>
          </div>
        </div>
      </div>

      <!-- Charts Screen -->
      <div id="charts-screen" class="screen">
        <h2>ุงูุฑุณูู ุงูุจูุงููุฉ</h2>
        <div class="charts-container">
          <div class="chart-card">
            <h3>ูุดุชุฑูุงุช ุงููููุฏ ุญุณุจ ุงูููุน</h3>
            <canvas id="fuel-sales-chart"></canvas>
          </div>
          <div class="chart-card">
            <h3>ุงููุตุฑููุงุช ุงูุดูุฑูุฉ</h3>
            <canvas id="monthly-revenue-chart"></canvas>
          </div>
          <div class="chart-card">
            <h3>ุชูุฒูุน ุทุฑู ุงูุฏูุน</h3>
            <canvas id="payment-methods-chart"></canvas>
          </div>
        </div>
      </div>

      <!-- Report Screen -->
      <div id="report-screen" class="screen">
        <h2>ุงูุชูุงุฑูุฑ</h2>
        <div class="report-controls">
          <div class="date-range">
            <label for="start-date">ูู ุชุงุฑูุฎ:</label>
            <input type="date" id="start-date">
            <label for="end-date">ุฅูู ุชุงุฑูุฎ:</label>
            <input type="date" id="end-date">
            <button class="btn btn-primary" onclick="generateReport()">ุฅูุดุงุก ุงูุชูุฑูุฑ</button>
          </div>
          <button class="btn btn-secondary" onclick="exportToPDF()">ุชุตุฏูุฑ PDF</button>
          </div>

        <div id="report-content" class="report-content">
          <div class="report-summary">
            <h3>ููุฎุต ุงูุชูุฑูุฑ</h3>
            <div id="report-summary-data"></div>
          </div>
          <div class="report-details">
            <h3>ุชูุงุตูู ุงููุดุชุฑูุงุช</h3>
            <div id="report-details-table"></div>
          </div>
        </div>
      </div>

      <!-- Settings Screen -->
      <div id="settings-screen" class="screen">
        <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
        <div class="settings-layout">
          <aside class="settings-sidebar">
            <ul class="settings-menu">
              <li class="settings-menu-item active" data-settings-section="manage-products">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</li>
              <li class="settings-menu-item" data-settings-section="invoices-list">ุนุฑุถ ุงูููุงุชูุฑ</li>
              <li class="settings-menu-item" data-settings-section="general">ุฅุนุฏุงุฏุงุช ุนุงูุฉ</li>
              <li class="settings-menu-item" data-settings-section="backup">ุงููุณุฎ ุงูุงุญุชูุงุทู</li>
            </ul>
          </aside>
          <div class="settings-content">
            <section id="settings-section-sale-prices" class="settings-section">
              <!-- Header with actions -->
              <div class="prices-header">
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                  <span class="prices-label">ุชุนุฏูู ุงูุฃุณุนุงุฑ ุงุจุชุฏุงุกู ูู</span>
                  <input type="date" id="price-start-date" class="date-input-compact">
                  <button class="btn btn-primary" onclick="saveAllPrices()">ุญูุธ</button>
                </div>
                <button class="btn btn-secondary" onclick="showPriceHistory()">ุณุฌู ุงูุฃุณุนุงุฑ</button>
              </div>

              <!-- Price Type Tabs -->
              <div class="price-type-tabs">
                <div class="price-type-tab active" data-price-type="fuel" onclick="switchPriceType('fuel')">
                  ุฃุณุนุงุฑ ุงููููุฏ
                </div>
                <div class="price-type-tab" data-price-type="oil" onclick="switchPriceType('oil')">
                  ุฃุณุนุงุฑ ุงูุฒููุช
                </div>
              </div>

              <!-- Fuel Prices Table -->
              <div id="fuel-prices-section" class="price-type-section active">
                <div class="prices-table-wrapper">
                  <table class="base-table prices-table-full">
                    <thead>
                      <tr>
                        <th style="width: 50px;">#</th>
                        <th>ุงูููุชุฌ</th>
                        <th style="width: 200px; text-align: center;">ุงูุณุนุฑ ุงูุญุงูู</th>
                        <th style="width: 150px; text-align: center;">ุงูุณุนุฑ ุงูุฌุฏูุฏ</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr data-product="ุจูุฒูู ูจู">
                        <td>1</td>
                        <td class="product-name">ุจูุฒูู ูจู</td>
                        <td style="text-align: center;"><span class="current-price" id="current-price-80">โ</span></td>
                        <td style="text-align: center;"><input type="number" id="price-80" step="0.01" class="table-price-input" placeholder="0.00"></td>
                      </tr>
                      <tr data-product="ุจูุฒูู ูฉูข">
                        <td>2</td>
                        <td class="product-name">ุจูุฒูู ูฉูข</td>
                        <td style="text-align: center;"><span class="current-price" id="current-price-92">โ</span></td>
                        <td style="text-align: center;"><input type="number" id="price-92" step="0.01" class="table-price-input" placeholder="0.00"></td>
                      </tr>
                      <tr data-product="ุจูุฒูู ูฉูฅ">
                        <td>3</td>
                        <td class="product-name">ุจูุฒูู ูฉูฅ</td>
                        <td style="text-align: center;"><span class="current-price" id="current-price-95">โ</span></td>
                        <td style="text-align: center;"><input type="number" id="price-95" step="0.01" class="table-price-input" placeholder="0.00"></td>
                      </tr>
                      <tr data-product="ุณููุงุฑ">
                        <td>4</td>
                        <td class="product-name">ุณููุงุฑ</td>
                        <td style="text-align: center;"><span class="current-price" id="current-price-diesel">โ</span></td>
                        <td style="text-align: center;"><input type="number" id="price-diesel" step="0.01" class="table-price-input" placeholder="0.00"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Oil Prices Table -->
              <div id="oil-prices-section" class="price-type-section">
                <div class="prices-table-wrapper">
                  <table class="base-table prices-table-full">
                    <thead>
                      <tr>
                        <th style="width: 50px;">#</th>
                        <th>ุงูููุชุฌ</th>
                        <th style="width: 200px; text-align: center;">ุงูุณุนุฑ ุงูุญุงูู</th>
                        <th style="width: 150px; text-align: center;">ุงูุณุนุฑ ุงูุฌุฏูุฏ</th>
                      </tr>
                    </thead>
                    <tbody id="oil-prices-table-body">
                      <!-- Oil prices will be added here dynamically -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- Add New Product Section -->
            <section id="settings-section-add-product" class="settings-section">
              <h3 style="color: #2c3e50; margin-bottom: 2rem;">ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h3>
              <div class="form-group" style="margin-bottom: 1.5rem;">
                <label for="new-product-name" style="display: block; margin-bottom: 0.5rem; color: #2c3e50; font-weight: 600;">ุงุณู ุงูููุชุฌ:</label>
                <input type="text" id="new-product-name" placeholder="ุฃุฏุฎู ุงุณู ุงูููุชุฌ" style="width: 100%; max-width: 500px; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-family: 'Noto Naskh Arabic', serif; font-size: 1rem;">
              </div>
              <div class="form-group" style="margin-bottom: 1.5rem;">
                <label for="new-product-type" style="display: block; margin-bottom: 0.5rem; color: #2c3e50; font-weight: 600;">ููุน ุงูููุชุฌ:</label>
                <select id="new-product-type" onchange="toggleVatField()" style="width: 100%; max-width: 500px; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-family: 'Noto Naskh Arabic', serif; font-size: 1rem;">
                  <option value="">ุงุฎุชุฑ ุงูููุน</option>
                  <option value="fuel">ูููุฏ</option>
                  <option value="oil">ุฒูุช</option>
                </select>
              </div>
              <div class="form-group" id="vat-field" style="margin-bottom: 1.5rem; display: none;">
                <label for="new-product-vat" style="display: block; margin-bottom: 0.5rem; color: #2c3e50; font-weight: 600;">ุงูุถุฑูุจุฉ ุงููุถุงูุฉ (%):</label>
                <input type="number" id="new-product-vat" placeholder="0" step="0.01" min="0" max="100" style="width: 100%; max-width: 500px; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-family: 'Noto Naskh Arabic', serif; font-size: 1rem;">
              </div>
              <div class="form-group" style="margin-bottom: 1.5rem;">
                <label for="new-product-price" style="display: block; margin-bottom: 0.5rem; color: #2c3e50; font-weight: 600;">ุณุนุฑ ุงูุจูุน:</label>
                <input type="number" id="new-product-price" placeholder="0.00" step="0.01" min="0" style="width: 100%; max-width: 500px; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-family: 'Noto Naskh Arabic', serif; font-size: 1rem;">
              </div>
              <button class="btn btn-primary" onclick="addNewProduct()" style="padding: 0.75rem 2rem; font-size: 1rem;">ุฅุถุงูุฉ ุงูููุชุฌ</button>
            </section>

            <!-- Manage Products Section -->
            <section id="settings-section-manage-products" class="settings-section active">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h3 style="color: #2c3e50; margin: 0;">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</h3>
                <div style="display: flex; gap: 1rem;">
                  <button class="btn btn-secondary" onclick="navigateToEditPrices()" style="display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                      <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
                    </svg>
                    ุชุนุฏูู ุงูุฃุณุนุงุฑ
                  </button>
                  <button class="btn btn-primary" onclick="navigateToAddProduct()" style="display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                      <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                    ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
                  </button>
                </div>
              </div>

              <!-- Price Type Tabs -->
              <div class="price-type-tabs">
                <div class="price-type-tab active" data-price-type="fuel" onclick="switchManageProductType('fuel')">
                  ุงููููุฏ
                </div>
                <div class="price-type-tab" data-price-type="oil" onclick="switchManageProductType('oil')">
                  ุงูุฒููุช
                </div>
              </div>

              <!-- Fuel Products Table -->
              <div id="manage-fuel-section" class="price-type-section active">
                <div class="prices-table-wrapper">
                  <table class="base-table prices-table-full">
                    <thead>
                      <tr>
                        <th style="width: 50px;">#</th>
                        <th>ุงุณู ุงูููุชุฌ</th>
                        <th>ุงูุณุนุฑ ุงูุญุงูู</th>
                        <th>ุงูุฅุฌุฑุงุกุงุช</th>
                      </tr>
                    </thead>
                    <tbody id="manage-fuel-table-body">
                      <!-- Fuel products will be added here dynamically -->
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Oil Products Table -->
              <div id="manage-oil-section" class="price-type-section">
                <div class="prices-table-wrapper">
                  <table class="base-table prices-table-full">
                    <thead>
                      <tr>
                        <th style="width: 50px;">#</th>
                        <th>ุงุณู ุงูููุชุฌ</th>
                        <th>ุงูุณุนุฑ ุงูุญุงูู</th>
                        <th>ุงูุถุฑูุจุฉ ุงููุถุงูุฉ (%)</th>
                        <th>ุงูุฅุฌุฑุงุกุงุช</th>
                      </tr>
                    </thead>
                    <tbody id="manage-oil-table-body">
                      <!-- Oil products will be added here dynamically -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- General Settings Section -->
            <section id="settings-section-general" class="settings-section">
              <h3>ุฅุนุฏุงุฏุงุช ุนุงูุฉ</h3>
              <div class="form-group">
                <label for="station-name">ุงุณู ุงููุญุทุฉ:</label>
                <input type="text" id="station-name" value="ูุญุทุฉ ุจูุฒูู ุณูููุฏ - ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ ููุจุชุฑูู">
              </div>
              <div class="form-group">
                <label for="station-address">ุงูุนููุงู:</label>
                <input type="text" id="station-address" placeholder="ุฃุฏุฎู ุนููุงู ุงููุญุทุฉ">
              </div>
              <div class="form-group">
                <label for="station-phone">ุฑูู ุงููุงุชู:</label>
                <input type="text" id="station-phone" placeholder="ุฃุฏุฎู ุฑูู ุงููุงุชู">
              </div>
              <button class="btn btn-primary" onclick="saveGeneralSettings()">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>

              <!-- Updates Section -->
              <div class="settings-divider"></div>
              <h3>ุงูุชุญุฏูุซุงุช</h3>

              <div class="update-info-card">
                <div class="update-info-row">
                  <span class="update-label">ุงูุฅุตุฏุงุฑ ุงูุญุงูู:</span>
                  <span class="update-value" id="current-version">1.0.0</span>
                </div>
                <div class="update-info-row">
                  <span class="update-label">ุขุฎุฑ ูุญุต:</span>
                  <span class="update-value" id="last-update-check">ูู ูุชู ุงููุญุต ุจุนุฏ</span>
                </div>
                <div class="update-info-row">
                  <span class="update-label">ุงูุญุงูุฉ:</span>
                  <span class="update-value" id="update-status">ุฌุงูุฒ ูููุญุต</span>
                </div>
              </div>

              <div class="form-group">
                <label>
                  <input type="checkbox" id="auto-check-updates" checked>
                  ูุญุต ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู ุนูุฏ ุจุฏุก ุงูุชุดุบูู
                </label>
              </div>

              <div class="update-actions-group">
                <button class="btn btn-primary" onclick="checkForUpdatesManually()">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="margin-left: 0.5rem;">
                    <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                  </svg>
                  ูุญุต ุงูุชุญุฏูุซุงุช ุงูุขู
                </button>
                <button class="btn btn-secondary" id="view-changelog-btn" onclick="viewChangelog()" style="display: none;">
                  ุนุฑุถ ุงูุชุบููุฑุงุช
                </button>
              </div>
            </section>

            <!-- Invoices List Section -->
            <section id="settings-section-invoices-list" class="settings-section">
              <h3>ุนุฑุถ ุงูููุงุชูุฑ</h3>

              <!-- Filters -->
              <div class="invoices-filters">
                <div class="filter-group">
                  <label for="invoice-type-filter">ููุน ุงููุงุชูุฑุฉ:</label>
                  <select id="invoice-type-filter" onchange="filterInvoices()">
                    <option value="all">ุงููู</option>
                    <option value="fuel">ูููุฏ</option>
                    <option value="oil">ุฒููุช</option>
                  </select>
                </div>
                <div class="filter-group">
                  <label for="invoice-start-date">ูู ุชุงุฑูุฎ:</label>
                  <input type="date" id="invoice-start-date" onchange="filterInvoices()">
                </div>
                <div class="filter-group">
                  <label for="invoice-end-date">ุฅูู ุชุงุฑูุฎ:</label>
                  <input type="date" id="invoice-end-date" onchange="filterInvoices()">
                </div>
                <button class="btn btn-secondary" onclick="resetInvoiceFilters()">ุฅุนุงุฏุฉ ุชุนููู</button>
              </div>

              <!-- Invoices Table -->
              <div class="invoices-table-wrapper">
                <table class="base-table invoices-table">
                  <thead>
                    <tr>
                      <th>ุงูุชุงุฑูุฎ</th>
                      <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                      <th>ุงูููุน</th>
                      <th>ุงูุฅุฌูุงูู</th>
                      <th>ุงูุฅุฌุฑุงุกุงุช</th>
                    </tr>
                  </thead>
                  <tbody id="invoices-list-body">
                    <!-- Invoices will be loaded here -->
                  </tbody>
                </table>
                <div id="invoices-empty-state" style="display: none; text-align: center; padding: 3rem; color: #666;">
                  ูุง ุชูุฌุฏ ููุงุชูุฑ ูุนุฑุถูุง
                </div>
              </div>
            </section>

            <!-- Backup Section -->
            <section id="settings-section-backup" class="settings-section">
              <h3>ุงููุณุฎ ุงูุงุญุชูุงุทู</h3>
              <div class="form-group">
                <p>ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุจูุงูุงุชู ูุถูุงู ุนุฏู ููุฏุงููุง.</p>
              </div>
              <div class="form-actions">
                <button class="btn btn-primary" onclick="exportBackup()">ุชุตุฏูุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</button>
                <button class="btn btn-secondary" onclick="importBackup()">ุงุณุชูุฑุงุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</button>
              </div>
              <input type="file" id="backup-file-input" style="display: none;" accept=".json" onchange="handleBackupFile(event)">
            </section>
          </div>
        </div>
      </div>

      <!-- Depot Management Screen -->
      <div id="depot-screen" class="screen">
        <div class="depot-container">
          <!-- Header Section -->
          <div class="depot-header">
            <h2>๐ช ุฅุฏุงุฑุฉ ุงููุฎุฒู</h2>
            <p class="depot-subtitle">ุชุชุจุน ูุฎุฒูู ุงูุฒููุช</p>
          </div>
          
          <!-- Oil Selection Box -->
          <div class="oil-selection-box">
            <h3>ุงุฎุชุฑ ููุน ุงูุฒูุช</h3>
            <div class="oil-grid">
              <div class="oil-item" data-oil="COOP FACT 20L">COOP FACT 20L</div>
              <div class="oil-item" data-oil="COOP FACT 8L">COOP FACT 8L</div>
              <div class="oil-item" data-oil="COOP FACT 5L">COOP FACT 5L</div>
              <div class="oil-item" data-oil="COOP FACT 4L">COOP FACT 4L</div>
              <div class="oil-item" data-oil="COOP FACT 1L">COOP FACT 1L</div>
              <div class="oil-item" data-oil="SUPER STAN 180L">SUPER STAN 180L</div>
              <div class="oil-item" data-oil="SUPER STAN 20L">SUPER STAN 20L</div>
              <div class="oil-item" data-oil="SUPER STAN 4L">SUPER STAN 4L</div>
              <div class="oil-item" data-oil="ONE EXTRA 5W/40">ONE EXTRA 5W/40</div>
              <div class="oil-item" data-oil="ONE EXTRA 5W/40 5L">ONE EXTRA 5W/40 5L</div>
              <div class="oil-item" data-oil="CI4 15W/40 20L">CI4 15W/40 20L</div>
              <div class="oil-item" data-oil="CI4 5L">CI4 5L</div>
              <div class="oil-item" data-oil="SJ 4L">SJ 4L</div>
              <div class="oil-item" data-oil="SJ 1L">SJ 1L</div>
              <div class="oil-item" data-oil="CPC 8000 4L">CPC 8000 4L</div>
              <div class="oil-item" data-oil="CPC 8000 5L">CPC 8000 5L</div>
              <div class="oil-item" data-oil="XPL 4L">XPL 4L</div>
              <div class="oil-item" data-oil="SF 20/50 4L">SF 20/50 4L</div>
              <div class="oil-item" data-oil="SF 20/50 1L">SF 20/50 1L</div>
              <div class="oil-item" data-oil="HYDRAULIC 68">HYDRAULIC 68</div>
              <div class="oil-item" data-oil="DIXERON 1L">DIXERON 1L</div>
              <div class="oil-item" data-oil="ุชุฑูุณ ูกูฆู HP ูกูจ ูุชุฑ">ุชุฑูุณ ูกูฆู HP ูกูจ ูุชุฑ</div>
              <div class="oil-item" data-oil="ูุงุก ุฃุญูุฑ ุฑุงุฏูุชูุฑ">ูุงุก ุฃุญูุฑ ุฑุงุฏูุชูุฑ</div>
              <div class="oil-item" data-oil="ุจุงูู ูก\ูค ูุชุฑ">ุจุงูู ูก\ูค ูุชุฑ</div>
              <div class="oil-item" data-oil="ุณุงูุจ ูก ู">ุณุงูุจ ูก ู</div>
              <div class="oil-item" data-oil="ุฑููุงู ูููู ูจููู">ุฑููุงู ูููู ูจููู</div>
              <div class="oil-item" data-oil="ุดุงูุจู ุณูุงุฑุงุช">ุดุงูุจู ุณูุงุฑุงุช</div>
              <div class="oil-item" data-oil="ูุงุก ููุทุฑ">ูุงุก ููุทุฑ</div>
              <div class="oil-item" data-oil="ููู ูุงุณุช ุฑุงุฆุญุฉ ุงูุชูุงุญ">ููู ูุงุณุช ุฑุงุฆุญุฉ ุงูุชูุงุญ</div>
              <div class="oil-item" data-oil="ููุธู ุงูุงูุฏู ุจุงููุถุฎุฉ">ููุธู ุงูุงูุฏู ุจุงููุถุฎุฉ</div>
              <div class="oil-item" data-oil="ูููุน ูุงูุชุด ุณูุงุฑุฉ">ูููุน ูุงูุชุด ุณูุงุฑุฉ</div>
              <div class="oil-item" data-oil="ููุฑุงู ุจูููุงุฑูู">ููุฑุงู ุจูููุงุฑูู</div>
              <div class="oil-item" data-oil="ูููุน ุชุงุจููู ุงูุชุฑุดุงูู">ูููุน ุชุงุจููู ุงูุชุฑุดุงูู</div>
              <div class="oil-item" data-oil="ูุงุก ุฃุฎุถุฑ ุฑุงุฏูุชูุฑ">ูุงุก ุฃุฎุถุฑ ุฑุงุฏูุชูุฑ</div>
            </div>
          </div>

          <!-- Results Section -->
          <div id="results-section" class="results-section" style="display: none;">
            <!-- Stock Display Card -->
            <div class="current-stock-card">
              <div class="stock-card">
                <div class="stock-header">
                  <div class="stock-icon">๐ฆ</div>
                  <div class="stock-info">
                    <div class="stock-label">ุงูุฑุตูุฏ ุงูุญุงูู</div>
                    <div id="current-stock-amount" class="stock-amount">0</div>
                    <div id="selected-oil-name" class="selected-oil">-- ุงุฎุชุฑ ููุน ุงูุฒูุช --</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Movements Table -->
            <div class="movements-section">
              <div id="movements-table"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Price History Modal -->
      <div id="price-history-modal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
          <div class="modal-header">
            <h3>ุณุฌู ุชุบููุฑุงุช ุงูุฃุณุนุงุฑ</h3>
            <button class="close-modal" onclick="closePriceHistoryModal()">&times;</button>
          </div>
          <div class="modal-body">
            <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center; direction: rtl;">
              <div>
                <label style="font-weight: 600; margin-left: 0.5rem;">ููุน ุงูููุชุฌ:</label>
                <select id="history-product-filter" onchange="loadPriceHistory()" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 6px; font-family: 'Noto Naskh Arabic', serif; min-width: 200px;">
                  <option value="">ุงููู</option>
                  <optgroup label="ุงููููุฏ">
                    <option value="ุจูุฒูู ูจู">ุจูุฒูู ูจู</option>
                    <option value="ุจูุฒูู ูฉูข">ุจูุฒูู ูฉูข</option>
                    <option value="ุจูุฒูู ูฉูฅ">ุจูุฒูู ูฉูฅ</option>
                    <option value="ุณููุงุฑ">ุณููุงุฑ</option>
                  </optgroup>
                  <optgroup label="ุงูุฒููุช" id="oil-filter-group">
                    <!-- Will be populated dynamically -->
                  </optgroup>
                </select>
              </div>
            </div>
            <div id="price-history-content">
              <!-- History will be loaded here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Add Movement Modal -->
      <div id="movement-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>ุฅุถุงูุฉ ุญุฑูุฉ ูุฎุฒูู</h3>
            <button class="close-modal" onclick="closeMovementModal()">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-row">
              <div class="form-group">
                <label for="movement-date">ุงูุชุงุฑูุฎ:</label>
                <input type="date" id="movement-date" required>
              </div>
              <div class="form-group">
                <label for="movement-type">ููุน ุงูุญุฑูุฉ:</label>
                <select id="movement-type" required onchange="toggleInvoiceField()">
                  <option value="">ุงุฎุชุฑ ููุน ุงูุญุฑูุฉ</option>
                  <option value="in">ุฏุฎูู</option>
                  <option value="out">ุฎุฑูุฌ</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="movement-quantity">ุงููููุฉ:</label>
                <input type="number" id="movement-quantity" min="1" required>
              </div>
              <div class="form-group" id="invoice-field" style="display: none;">
                <label for="movement-invoice">ุฑูู ุงููุงุชูุฑุฉ:</label>
                <input type="text" id="movement-invoice">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" onclick="saveMovement()">ุญูุธ</button>
            <button class="btn btn-secondary" onclick="closeMovementModal()">ุฅูุบุงุก</button>
          </div>
        </div>
      </div>

      <!-- Invoice Details Modal -->
      <div id="invoice-details-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
          <div class="modal-header">
            <h3>ุชูุงุตูู ุงููุงุชูุฑุฉ</h3>
            <button class="close-modal" onclick="closeInvoiceDetailsModal()">&times;</button>
          </div>
          <div class="modal-body">
            <div id="invoice-details-content">
              <!-- Invoice details will be loaded here -->
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeInvoiceDetailsModal()">ุฅุบูุงู</button>
          </div>
        </div>
      </div>

      <!-- Edit Product Name Modal -->
      <div id="edit-product-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>ุชุนุฏูู ุงุณู ุงูููุชุฌ</h3>
            <button class="close-modal" onclick="closeEditProductModal()">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="edit-product-current-name">ุงูุงุณู ุงูุญุงูู:</label>
              <input type="text" id="edit-product-current-name" readonly style="background-color: #f5f5f5;">
            </div>
            <div class="form-group">
              <label for="edit-product-new-name">ุงูุงุณู ุงูุฌุฏูุฏ:</label>
              <input type="text" id="edit-product-new-name" placeholder="ุฃุฏุฎู ุงูุงุณู ุงูุฌุฏูุฏ" required>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" onclick="saveEditProductName()">ุญูุธ</button>
            <button class="btn btn-secondary" onclick="closeEditProductModal()">ุฅูุบุงุก</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-navigation">
      <button class="nav-btn active" data-screen="home">ุงูุฑุฆูุณูุฉ</button>
      <button class="nav-btn" data-screen="invoice">ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</button>
      <button class="nav-btn" data-screen="charts">ุงูุฑุณูู ุงูุจูุงููุฉ</button>
      <button class="nav-btn" data-screen="report">ุงูุชูุงุฑูุฑ</button>
      <button class="nav-btn" data-screen="settings">ุงูุฅุนุฏุงุฏุงุช</button>
    </nav>
  </div>

  <script src="renderer.js"></script>
</body>

</html>
